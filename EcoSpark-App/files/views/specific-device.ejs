<!DOCTYPE html >
<html>
	<head>

        <meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <link rel="stylesheet" type="text/css" href="/stylesheets/homePage.css">  
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
		<link rel="stylesheet" href="/stylesheets/bootstrap.min.css">
        <link rel="stylesheet" href="/stylesheets/mdb.min.css">
        <link rel="stylesheet" href="/stylesheets/font.css">

        <title> Eco Spark - Device </title>
        
    </head>

    <body>

        <%- include ('partials/header') -%>
        <% deviceInfo.forEach(function(device) {%>
            <div class="text-center h1 my-4">
                <%=device.deviceDisplayName%>
            </div>
        <% }) %>
        
        <div class="container">
        <ul class="list-unstyled" style="padding-left: 100;">
            <li class="media">
                <% deviceInfo.forEach(function(device) {%>
                    <% if (device.deviceType == "Appliance") {%>
                        <div class="shadow-none card green lighten-4">
                            <div class="view overlay text-center">
                                <span class="fa-stack fa-6x ">
                                    <i class="fa fa-circle fa-stack-2x icon-background"></i>
                                    <a class="fas fa-sitemap fa-stack-1x icon" style="color:white" href="/home/devices/<%=device.deviceID %>"></a>
                                </span>
                            </div>
                        </div>
                    <% } %>
                    <% if (device.deviceType == "Light") { %>
                        <div class="shadow-none card green lighten-4">
                            <div class="view overlay text-center">
                                <span class="fa-stack fa-6x ">
                                    <i class="fa fa-circle fa-stack-2x icon-background"></i>
                                    <a class="fas fa-lightbulb fa-stack-1x icon" style="color:white" href="/home/devices/<%=device.deviceID %>"></a>
                                </span>
                            </div>
                        </div>
                    <% } %>
                    <% if (device.deviceType == "Heating") { %>
                        <div class="shadow-none card green lighten-4">
                            <div class="view overlay text-center">
                                <span class="fa-stack fa-6x ">
                                    <i class="fa fa-circle fa-stack-2x icon-background"></i>
                                    <a class="fas fa-thermometer-half fa-stack-1x icon" style="color:white" href="/home/devices/<%=device.deviceID%>"></a>
                                </span>
                            </div>>
                        </div>
                    <% } %>
                    <% if (device.deviceType == "Socket") { %>
                        <div class="shadow-none card green lighten-4">
                            <div class="view overlay text-center">
                                <span class="fa-stack fa-6x ">
                                    <i class="fa fa-circle fa-stack-2x icon-background"></i>
                                    <a class="fas fa-plug fa-stack-1x icon" style="color:white" href="/home/devices/<%=device.deviceID%>"></a>
                                </span>
                            </div>
                        </div>
                    <% } %>
                    <% if (device.deviceType == "TV") { %>
                        <div class="shadow-none card green lighten-4">
                            <div class="view overlay text-center">
                                <span class="fa-stack fa-6x ">
                                    <i class="fa fa-circle fa-stack-2x icon-background"></i>
                                    <a class="fas fa-tv fa-stack-1x icon" style="color:white" href="/home/devices/<%=device.deviceID%>"></a>
                                </span>
                            </div>
                        </div>
                    <% } %>
                    <% if (device.deviceType == "Miscellaneous") { %>
                        <div class="shadow-none card green lighten-4">
                            <div class="view overlay text-center">
                                <span class="fa-stack fa-6x ">
                                    <i class="fa fa-circle fa-stack-2x icon-background"></i>
                                    <a class="fas fa-exclamation-circle fa-stack-1x icon" style="color:white" href="/home/devices/<%=device.deviceID%>"></a>
                                </span>
                            </div>
                        </div>
                    <% } %>
                <% }) %>
              <div class="media-body">
                <div class="modal fade" id="deleteDevice"></div> 
                <h5 class="mt-0 font-weight-bold">Device Details:</h5>
                
                    
                    <% deviceInfo.forEach(function(device) { %>
                        <form action="<%=device.deviceID%>/deleteDevice" method="post">
                            <h2 id="deviceID"> <%= device.deviceID %> </h2>
                            <h2> Device Type: <%= device.deviceType %></h2></br>
                            
                            <% roomInfo.forEach(function(room) {%>
                                <h2> Device Location: <%= room.roomDisplayName %></h2></br>
                            <% }) %>
                            
                            <%userInfo.forEach(function(user) {%>
                                <%if (user.isAdmin == 1) {%>
                                    <div class="modal-footer d-flex" style="display:block">
                                        <button class="btn btn-default" type="submit">Delete Device</button>
                                    </div>
                                    </div>
                                <% } %>
                            <% }) %>

                        </form>
                    <% }) %>
                        
                    
                </div>
                </div>
              </div>
           
            </li>
          </ul>
        </div>
        

        <br></br>
        <div class="container">
            <div class="row">
                <div class="col-sm-6">
                    <div class="sliders rounded mb-0 green lighten-2 z-depth-1">
                        <br></br>

                        <div class="custom-control custom-switch">
                            <% var isEmpty = function(obj) {
                                return Object.keys(obj).length === 0;
                            }
                            if (isEmpty(runningDeviceInfo)) { %>
                                <!--set toggle to off-->
                                <input type="checkbox" class="custom-control-input" onclick="changes();" id="customSwitches">
                                <label class="custom-control-label" for="customSwitches">off/on</label>
                            <% } else {%>
                                <!--set toggle to on-->
                                <input type="checkbox" class="custom-control-input" onclick="changes();" id="customSwitches" checked>
                                <label class="custom-control-label" for="customSwitches">off/on</label>
                            <% } %>
                        </div>
                        <br></br>
                    </div>
                </div>
                
                <% var isEmpty = function(obj) {
                    return Object.keys(obj).length === 0;
                  }

                if (isEmpty(runningDeviceInfo)) { %>
                    <div class="col-sm-6">
                        <h4 class="fas fa-lightbulb"> Current device is off</h4>
                    </div>
                <% } else {%>
                    <% runningDeviceInfo.forEach (function(deviceR) {%>
                    <div class="col-sm-6">
                        <h4 class="fas fa-lightbulb"> Current device energy consumption : <%= deviceR.rDevicePower%></h4>
                    </div>
                    <% }) %>
                <% } %>
                
            </div>
        </div>

        <div class="edit">
            <div class="modal fade" id="modalLoginForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <%deviceInfo.forEach(function(device) {%>
                            <form action="<%=device.deviceID%>/updateDeviceName" method="post">
                                <div class="modal-header text-center">
                                    <h4 class="modal-title w-100 font-weight-bold">Edit device</h4>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body mx-3">
                                    <div class="md-form mb-5">
                                        <i class="fas fa-edit prefix grey-text"></i>
                                        <input type="text" id="deviceName" name="deviceName" class="form-control">
                                        <label>New Device Name</label>
                                    </div>
                                </div>
                                <div class="modal-footer d-flex justify-content-center">
                                    <button class="btn btn-default" type="submit">Update</button>
                                </div>
                            </form>
                        <% }) %>
                    </div>
                </div>
            </div>
            <div class="text-center">
                <a href="" class="btn btn-default btn-rounded mb-4" data-toggle="modal" data-target="#modalLoginForm">
                    <i class="fas fa-edit"></i> Edit Device</a>
            </div>
        </div>

        
      </br>
      <footer class="page-footer font-small navbar-dark green lighten-2">
        <div class="footer-copyright text-center py-3 navbar-dark green lighten-2">    
            <div class="col-md-12" style="color:white">
                <h3>Site Settings:</h3>
            </div>
            </br>
            <main>
                <div class="row">
                    <div class="container d-md-flex align-items-center">
                        <div class="col-sm">
                            <div class="change-font" style="color:white">
                                <h3>Choose Text Size: 
                            </div>
                        </div>
                        <div class="col-sm">
                            <div class="change-font" style="color:white">
                                <h3><u>Small</u></h3>
                            </div>
                        </div>
                        <div class="col-sm">
                            <div class="change-font" style="color:white">
                                <h2><u>Medium</u></h2>
                            </div>
                        </div>
                        <div class="col-sm">
                            <div class="change-font" style="color:white">
                                <h1><u>Large</u></h1>
                            </div>
                        </div>
                        
                    </div>
                </div>
                </br>
               <div class="row">
                    <div class="container d-md-flex align-items-center">
                        <div class="col-sm">
                            <div class="change-font" style="color:white">
                                <button class="btn btn-default" type="button">Reset</button>
                            </div>
                        </div>
                    </div>
                </div>

            </main>
        </div>
    </footer>
        
        
        <script type="text/javascript" src="/javascripts/jquery.min.js"></script>
        <script type="text/javascript" src="/javascripts/popper.min.js"></script>
        <script type="text/javascript" src="/javascripts/bootstrap.min.js"></script>
        <script type="text/javascript" src="/javascripts/mdb.min.js"></script>
        <script type="text/javascript" src="/javascripts/font.js"></script>

    </body>
</html>