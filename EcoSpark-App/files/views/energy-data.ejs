<!DOCTYPE html >
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="x-ua-compatible" content="ie=edge">
		<link rel="stylesheet" type="text/css" href="/stylesheets/ecospark.css">  
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
		<link rel="stylesheet" href="/stylesheets/bootstrap.min.css">
		<link rel="stylesheet" href="/stylesheets/mdb.min.css">

		<style>
			#graphDayContainer {
				width: 100%;
				padding: 0;
				text-align: center;
				background-color: whitesmoke;
		}
						
			#graphWeekContainer {
				width: 80%;
				padding: 0;
				text-align: center;
				background-color: whitesmoke;
				margin-top: 20px;
			}            
					

			#graphMonthContainer {
				width: 80%;
				padding: 0;
				text-align: center;
				background-color: whitesmoke;
				margin-top: 20px;
			}
					
			#graphYearContainer {
				width: 80%;
				padding: 0;
				text-align: center;
				background-color: whitesmoke;
				margin-top: 20px;
			}
		</style>
                  
		<title> Eco Spark - Energy Data </title>
	</head>
                  

	<body>
		<%- include ('partials/header'); -%>
		<div class="container">
			<p class="white-text">
				<% if (averagesHInfo == "") { %>
					<div class="row justify-content-center">
						<div class="col-sm-6">
							<div class="ecoSparkCard white">
								<div class="card green lighten-3">
									<div class="card-body">
										<p class="h4 text-center">No Current Average Details Available...</p>
									</div>
								</div>
							</div>
						</div>
					</div>
				<% } %>
				<% averagesHInfo.forEach(function(aver) { %>
					<% if ((aver.averOverallPower) <= (aver.powerLimit)) {%>
					<blockquote class="blockquote bq-success" style="color:white; background-color: #add2af; font-weight: bold;">
						<h1 class="bq-title">Well Done! </h1>
						Your energy consumption for today is below your limit! 
						<br>
						Average Energy Consumption: <%= aver.averOverallPower%> 
						<br>
						Energy Limit Set: <%= aver.powerLimit%>
					</blockquote>
					<% } else { %>
					<blockquote class="blockquote bq-danger" style="color:white; background-color: #add2af; font-weight: bold;">
						<h1 class="bq-title">Oh Dear! </h1>
						Your energy consumption for today is above your limit! 
						<br>
						Average Energy Consumption: <%= aver.averOverallPower%> 
						<br>
						Energy Limit Set: <%= aver.powerLimit%>
					</blockquote>
					<% } %>
				<% }) %>
				</p>
			</div>
		</br>

			<div class="container">
				<div class="row">
					<div class="col-sm" style="text-align: right;">
						<h2> Energy Data For :</h2>
					</div>
					<div class="col-sm">
						<h2 id="date"></h2> 
					</div>
				</div>
				</br>
				
				<canvas id="lineChart"></canvas>
			</div>

		<br>
		<br>
		
			<div class="container pb-4">
				<h2 class="titles"> What type of reports would you like to see? </h2>
			<br>
				<div class="row justify-content-center">
					<div class="col-3-sm">
						<button type="button" class="btn dusty-grass-gradient btn-rounded" onclick="dayAverage()">Day Overview</button>
					</div>
					<div class="col-3-sm" align="center">
						<button type="button" class="btn dusty-grass-gradient btn-rounded" onclick="weekAverage()">Week Overview</button>
					</div>
					<div class="col-3-sm" align="center">
						<button type="button" class="btn dusty-grass-gradient btn-rounded" onclick="monthAverage()">Month Overview</button>
					</div>
					<div class="col-3-sm" align="center">
						<button type="button" class="btn dusty-grass-gradient btn-rounded" onclick="yearAverage()">Year Overview</button>
					</div>
				</div>
			</div>
			

		<div class="container justify-content-center" id="graphDayContainer" style="display: none;">
			<div class="container-flex green lighten-4 pb-4">
				<h1> Graph for Days Energy Consumption </h1>
				<br>
				<canvas id="lineChartA"></canvas>
			</div>
		</div>

		<div class="container justify-content-center" id="graphWeekContainer" style="display: none;">
			<div class="container-flex green lighten-4 pb-4">
				<h1> Graph for Weeks Energy Consumption </h1>
			<br>
			<canvas id="lineChartB"></canvas>
			</div>
		</div>
		
		<div class="container justify-content-center" id="graphMonthContainer" style="display: none;">
			<div class="container-flex green lighten-4 pb-4">

				<h1> Graph for Month Energy Consumption </h1>
			<br>
			<canvas id="lineChartC"></canvas>
			</div>
		</div>

		<div class="container justify-content-center" id="graphYearContainer" style="display: none;">
			<div class="container-flex green lighten-4 pb-4">
				<h1> Graph for Year Energy Consumption </h1>
			<br>
			<canvas id="lineChartD"></canvas>
			</div>
		</div>

		<script type="text/javascript" src="/javascripts/jquery.min.js"></script>
		<script type="text/javascript" src="/javascripts/popper.min.js"></script>
		<script type="text/javascript" src="/javascripts/bootstrap.min.js"></script>
		<script type="text/javascript" src="/javascripts/mdb.min.js"></script>
		<script>
			n =  new Date();
			y = n.getFullYear();
			m = n.getMonth() + 1;
			d = n.getDate();
			document.getElementById("date").innerHTML = d + "/" + m + "/" + y;

			var ctxL = document.getElementById("lineChart").getContext('2d');
			var myLineChart = new Chart(ctxL, {
			type: 'line',
			data: {
			labels: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October",
			"November", "December"],
			datasets: [{
			label: "My First dataset",
			data: [65, 59, 80, 81, 56, 55, 40, 65, 59, 80, 81, 56, 55, 40],
			backgroundColor: [
			'rgba(105, 0, 132, .2)',
			],
			borderColor: [
			'rgba(200, 99, 132, .7)',
			],
			borderWidth: 2
			},
			{
			label: "My Second dataset",
			data: [28, 48, 40, 19, 86, 27, 90, 65, 59, 80, 81, 40, 50, 60],
			backgroundColor: [
			'rgba(0, 137, 132, .2)',
			],
			borderColor: [
			'rgba(0, 10, 130, .7)',
			],
			borderWidth: 2
			}
			]
			},
			options: {
			responsive: true
			}
			});

			var ctxL = document.getElementById("lineChartA").getContext('2d');
			var myLineChart = new Chart(ctxL, {
			type: 'line',
			data: {
			labels: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October",
			"November", "December"],
			datasets: [{
			label: "My First dataset",
			data: [65, 59, 80, 81, 56, 55, 40, 65, 59, 80, 81, 56, 55, 40],
			backgroundColor: [
			'rgba(105, 0, 132, .2)',
			],
			borderColor: [
			'rgba(200, 99, 132, .7)',
			],
			borderWidth: 2
			},
			{
			label: "My Second dataset",
			data: [28, 48, 40, 19, 86, 27, 90, 65, 59, 80, 81, 40, 50, 60],
			backgroundColor: [
			'rgba(0, 137, 132, .2)',
			],
			borderColor: [
			'rgba(0, 10, 130, .7)',
			],
			borderWidth: 2
			}
			]
			},
			options: {
			responsive: true
			}
			});

			var ctxL = document.getElementById("lineChartB").getContext('2d');
			var myLineChart = new Chart(ctxL, {
			type: 'line',
			data: {
			labels: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October",
			"November", "December"],
			datasets: [{
			label: "My First dataset",
			data: [65, 59, 80, 81, 56, 55, 40, 65, 59, 80, 81, 56, 55, 40],
			backgroundColor: [
			'rgba(105, 0, 132, .2)',
			],
			borderColor: [
			'rgba(200, 99, 132, .7)',
			],
			borderWidth: 2
			},
			{
			label: "My Second dataset",
			data: [28, 48, 40, 19, 86, 27, 90, 65, 59, 80, 81, 40, 50, 60],
			backgroundColor: [
			'rgba(0, 137, 132, .2)',
			],
			borderColor: [
			'rgba(0, 10, 130, .7)',
			],
			borderWidth: 2
			}
			]
			},
			options: {
			responsive: true
			}
			});

			var ctxL = document.getElementById("lineChartC").getContext('2d');
			var myLineChart = new Chart(ctxL, {
			type: 'line',
			data: {
			labels: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October",
			"November", "December"],
			datasets: [{
			label: "My First dataset",
			data: [65, 59, 80, 81, 56, 55, 40, 65, 59, 80, 81, 56, 55, 40],
			backgroundColor: [
			'rgba(105, 0, 132, .2)',
			],
			borderColor: [
			'rgba(200, 99, 132, .7)',
			],
			borderWidth: 2
			},
			{
			label: "My Second dataset",
			data: [28, 48, 40, 19, 86, 27, 90, 65, 59, 80, 81, 40, 50, 60],
			backgroundColor: [
			'rgba(0, 137, 132, .2)',
			],
			borderColor: [
			'rgba(0, 10, 130, .7)',
			],
			borderWidth: 2
			}
			]
			},
			options: {
			responsive: true
			}
			});

			var ctxL = document.getElementById("lineChartD").getContext('2d');
			var myLineChart = new Chart(ctxL, {
			type: 'line',
			data: {
			labels: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October",
			"November", "December"],
			datasets: [{
			label: "My First dataset",
			data: [65, 59, 80, 81, 56, 55, 40, 65, 59, 80, 81, 56, 55, 40],
			backgroundColor: [
			'rgba(105, 0, 132, .2)',
			],
			borderColor: [
			'rgba(200, 99, 132, .7)',
			],
			borderWidth: 2
			},
			{
			label: "My Second dataset",
			data: [28, 48, 40, 19, 86, 27, 90, 65, 59, 80, 81, 40, 50, 60],
			backgroundColor: [
			'rgba(0, 137, 132, .2)',
			],
			borderColor: [
			'rgba(0, 10, 130, .7)',
			],
			borderWidth: 2
			}
			]
			},
			options: {
			responsive: true
			}
			});

			function dayAverage() {
			
			var x = document.getElementById("graphDayContainer");
			if (x.style.display === "none") {
				x.style.display = "block";
				window.scrollTo(0,document.body.scrollHeight);
			} else {
				x.style.display = "none";
			}
			} 

			function weekAverage() {
			var x = document.getElementById("graphWeekContainer");
			if (x.style.display === "none") {
				x.style.display = "block";
				window.scrollTo(0,document.body.scrollHeight);
			} else {
				x.style.display = "none";
			}
			} 

			function monthAverage() {
			var x = document.getElementById("graphMonthContainer");
			if (x.style.display === "none") {
				x.style.display = "block";
				window.scrollTo(0,document.body.scrollHeight);
			} else {
				x.style.display = "none";
			}
			} 

			function yearAverage() {
			var x = document.getElementById("graphYearContainer");
			if (x.style.display === "none") {
				x.style.display = "block";
				window.scrollTo(0,document.body.scrollHeight);
			} else {
				x.style.display = "none";
			}
			} 
		</script>

		<% include ('partials/footer') -%>


	</body>
</html>