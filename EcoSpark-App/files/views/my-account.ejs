<!DOCTYPE html >
<html>
	<head>
        <meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <link rel="stylesheet" type="text/css" href="/stylesheets/ecospark.css">  
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
        <link rel="stylesheet" href="/stylesheets/bootstrap.min.css">
        <link rel="stylesheet" href="/stylesheets/mdb.min.css">
        <style>
            #myDIV {
				width: 80%;
				padding: 0;
				text-align: center;
		}
        </style>
		<title> Eco Spark - My Account </title>
    </head>

    <body>
        
        <%- include ('partials/header') -%>


        <% users.forEach(function(user) {%>
        <div class="container">
            <div class="ecoSparkCard white mx-auto" style="width: fit-content;">
                <div class="card green lighten-3">
                    <div class="card-title pt-4">
                        <h3 style="text-align: center;"> User Account Details for: <%=user.username%></h3>  
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col">
                                <div class="shadow-none card green lighten-3">
                                    <div class="view overlay text-center">
                                        <span class="fa-stack fa-6x ">
                                            <i class="fa fa-circle fa-stack-2x icon-background"></i>
                                            <i class="fas fa-user-circle fa-stack-1x" style="color:white"></i>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="col py-4">
                                <h3>Password: <%=user.password%></h3>
                                <h3>Is the user an Admin?
                                    <% if (user.isAdmin == "No") {%>
                                         No
                                      <% } else { %>
                                         Yes
                                    <% } %>
                                </h3>
                                <h3>Home Name: <%=user.homeName%></h3>
                            </div>
                        </div>

                        <div class="row justify-content-center">
                            <a class="btn btn-default" onclick="edit()">Edit Details</a>
                        </div>
                        

                        <div class="row justify-content-center">
                            <a class="btn btn-default" href="/">Log out</a>
                        </div>
                    </div>
                </div>
            </div>            
        </div>

    </br>

    <div class="container justify-content-center" id="myDIV" style="display: none;">
    <div class="col-sm">
      <div class="card p-4 rounded">
        <div class="container" style="text-align: center;">
          <h3>Extra Account Details</h3>
          <small class="form-text text-muted">These details can be changed to suit the user.</small>
        </div>
        <br>

        <h5>Display Name:</h5>
        <form action="<%=user.username%>/updateUserName" method="post">
          <input type="text" id="username" class="form-control rounded" name="username"
            placeholder="<%= user.displayName%>" onChange="this.for.submit">
          <small class="form-text text-muted">User's display nickname. Press enter after typing to change</small>
          <br>
        </form>

        <h5>Password:</h5>
        <form action="<%=user.username%>/updateUserPW" method="post">
          <input type="text" class="form-control rounded" placeholder="<%= user.password %>" id="password"
            name="password" onChange="this.for.submit">
          <small class="form-text text-muted">Users password. Press enter after typing to change</small>
        </form>
        <br>
      </div>
      </div>
        <% }) %>
    </br>

       <script>
            function edit() {
            var x = document.getElementById("myDIV");
            if (x.style.display === "none") {
                x.style.display = "block";
            } else {
                x.style.display = "none";
            }
            }
       </script> 
        <script type="text/javascript" src="/javascripts/jquery.min.js"></script>
        <script type="text/javascript" src="/javascripts/popper.min.js"></script>
        <script type="text/javascript" src="/javascripts/bootstrap.min.js"></script>
        <script type="text/javascript" src="/javascripts/mdb.min.js"></script>
    </body>
</html>